- update space Infantry and Space Marines production cost based on construction scenario (build-window-functions.js line 313)

- calculate a country's monthlyCapital, and monthlyManpower when an occupation happens and remove that province from country ownership
- that is to say, run the calculate functions for these values

- when a province is lost check each city for buildings with Capital maintenance and remember to subtract those
- buildings capital maintenance and other properties from the country losing the province

- make occupation circles appear around occupied cities

- When particularists finish occupying a province, give it back to the country

- when rebel demands are enforced, disband that type of rebel from each city and search for other types of rebels
- so they can enforce demands next

- add policies to the game so that rebel groups have something to enforce besides autonomy

- add a policy to force a Depression to end right away in exchange for more individual freedoms (autonomy being one)
- this can also be a policy that particularists want to enact

- test lag on spawning tens of thousands of rebels

- determine what type of soft cap to add to rebel spawn to match resource limitations on military units
- and more importantly handle any lag caused by rebel spawn (recommend a Capital based soft cap)

- rare events in the game should allow fully independent countries that do not have a corporation to spawn
- their own corporation

- when guerrillas spawn in a city and are defeated, they should have their city changed to a different city in that same province
- so that the next month they will be detected again and fight again for a different city. If no more cities are available then
- they should spawn in a random spot in the province maybe 2 months later (or maybe just keep fighting in that one city
- until all of them are finally killed)

- make sure that new rebels spawning triggers new battles

- make corporations and corporate stock suffer significantly from Depressions, also Trade
- stock should reduce in value 25% and trade and resource sales should be about 20%
- corporate population income should go down by about 30% and resource income and resources by 20%

- when a country or corp sells a corp back its own stock, it can push the corp into debt to pa for the stock
- which could bankrupt the corp causing HUGE penalties to income and Mercantile Battle
- owning enough Corp stock can also grant the entity control over the corp and owning 51 or more
- can allow a country to take ownership of a corp

- corporations can affect the gdppercapita of provinces and also the buildings somehow (figure these mechanics out)

- have ethnic groups now have an impact on unrest based on their share of the population

- Have an array for units in need of reinforcements

- when armies are defeated by rebels they should flee the city upon defeat

- battle instances should only be created if we can find units stationed in a city that are willing to fight
- the rebels which have spawned, otherwise the city should be immediately handed over to the rebels

- create a function to have provinces be ceded on line 200 of play.js

- make it so that when an occupation of particularists is completed, a policy can be removed from the country

- add provincial unrest reduction in play.js for provinces on the other 3 planets as well

- when reinforcing a military unit, make sure that manpower and health must go up together, because the units health on screen is
- always displayed as a percentage of max manpower

- Make it so that when new mil units or other types of units are created, they fill in 'null' values in their respective arrays

- an ideology should have at least 20% of the population of a province, then their unrest debuff kicks in

- (Ideology unrest * 0.25) + (Ideology Unrest * (0.75 * province population percentage)) * ideology unrest modifier (Diplomatic)

- then set up unrest for ethnic groups as well

- When rolling an 8 or higher in Naval Combat, their should be a 2% chance of a magazine hit, instantly destroying the target
- unless they have switched to only using railguns

- carriers in the back, destroyers in the front

- make a way to remove province seccessions from a province by retaking a city

- make it so that provinces being occupied by a country turn the occupiers color to make reinforcements work properly

- REBEL UNITS CANNOT MIX WITH COUNTRY UNITS IN COMBAT

- add demands to ideologies, such as policies ideologies will try to enact or governments they will try to
- establish if they take over a country, and add a list of policies to particularism that particularists would want to get rid of

- implement code to increase damage types and health by unit in accordance with National Ideas. This also means countries that are
- created in the nation builder that I will develop should have their base unit damage multiplied in accordance with national ideas

- There are two types of Guerrillas, ones connected to the province, and ones connected to an Ideology. When province connected
- guerrillas spawn, they will try to take control of cities in a province to force that province to belong to the country
- they have allegiance to. These can either be defensive guerillas that help you fight a defensive war, or seperatist guerrillas
- that try to occupy the province to force it over to the control of another country or resurrect one that has a core.
- Ideological Guerillas will try to take over as many cities as possible to install a new government. Province guerrillas
- spawn based on the defensive guerilla spawn properties of a country. Ideological guerrillas spawn based on the spawn properties
- of their ideology, but both guerrillas will fight using their spawn country's infantry stats as their base. Both types of
- guerrillas are contained within their spawn country's object in the countries array. Province Based guerrillas will spawn as
- a percentage of the provinces supporting ethnicity if they are hostile, while ideological guerrillas will spawn as a percentage
- of the provinces ideology

- when a province is occupied, a timer start counting down and after 4 years it defects to the other side, if any city
- in the province is taken by the other side the timer resets to 4 years and doesn't start counting again until all cities are
- occupied by the opposing side

- create slider functions and make sure they disembark when activated (if no fleet is present in the city don't run disembark)

- in city combat, if an enemy units enters a hostile city it is assumed that defending units are in the hostile city, so gather
- together all defending units and put them in defending arrays. If all of those arrays are empty, then hand over the city to the invader.
- when a country is at war, it should always check the 'countriesPresent' array of any city it enters to see if hostile forces are there
- if they are fight them, but if they are not then ignore it. When at peace only check to see if their are hostileGuerrillas.

- add negative economic effects to cities or provinces that are in civil unrest and also add an icon letting you know that this is happening

- create policy interactions screen, and make taxModifier policy change gdppercapita by amount specified in the countries object

- create fleet elements on canvas and give them the ability to move around

- create land unit elements on canvas

- make sure that moving armies out of a city closes that city window otherwise it may be possible to select an army which no longer
- exists in the interface thus causing an error. This should also remove the existence of fleet/army from city

- create ranged weapon targeting of closest fleets and armies

- create aircraft combat mechanics

- create Land Combat

- create land attrition

- when a war is declared, the countries involved should be given a debuff to their annualgdppercapitagrowth
- this debuff should possibly be made more severe when fighting happens in your owned territory

- armies should know what country they are in by looking at the color of the pixel they are on, the default map color should be
- fully brown, and in areas with hilly terrain the color of the province controller should be partially transparent so the brown
- shows through, then armies will determine if they are in hilly terrain based on the transparency of the pixel, but the raw color
- will still match the controlling country

- Add in monthly maintenance costs for all owned units after resource production but before total resource tabulation that goes to
- the player's screen

- create Space Control GUI screen

- Minarchist governments, especially seasteads should have a -0.02 autonomy decrease idea and start with very high autonomy
- provinces, this will cause autonomy to decrease extremely slowly over time thus forcing the Minarchist government to
- rely on corporations and stock and tradew as its primary source of income

- if a land army takes too much attrition for it to handle (like in mountains or with a HUGE stack) half of it will break and dissappear
- and the units will re-appear in the last city they came from in their '.cityID' property

- Make Railguns have less health but more damage and cheaper construction cost and missiles have significantly more health because destroying missile bunkers
- would be harder than destroying a large railgun in real life

- allow military units to capture cities

- make it so when a country is in a war with other countries as allies, captured cities leading to a captured province
- exchanges hands so the province can actually become occupied by a particular country (probably the country which has
- the most occupied cities)

- Allow players to zoom the map out (fabricjs tutorial part 5)

- allow pausing time and the game

- add fullscreen option for the game which automatically F11s the screen to fullscreen

- offload all front end functions and window opening and closing functions to seperate threads to free up main threads for background processing?

- create 'damaged' versions of city images to display when cities take damage in fighting

- Add corporations

- Add corporation screen

- add country legder and internal controls screen

- add country interactions screen for diplomacy

- Modify the Bankruptcy function in common-functions so that all corporate stock gets sold on Bankruptcy

- Add message alerts to a sidebar letting the player know production stopped when they run out of a resource and
- what resource is needed to continue production. Also create player alerts when they enter or leave bankruptcy, and
- enter or leave starvation

- Create Naval Combat

- Create Provinces borders and province view (goal August 2021)

- add orbital mechanics and units

- allow ranged weapons to attack orbital units (runBuildingProcesses2.js near the bottom)

- add government interactions and internal politics

- create a policy that allows you to select whether or not to fight hostile guerrillas belonging to your enemy when in their territory

- add Unions

- Add unrest/rebel mechanics and rebel popping

- Create AI triggers to start producing or buying a resource when they are producing something and that resource runs out

- Make it so that once a year when technology is being calculated the code checks every country to see if they have a research facility
- and sets their 'hasResearchFacility' property to true or false if they have one in any owned city, after this their may be a random
- chance of them discovering a new technology

- Add diplomatic interactions screen for countries

- Add Economic Control and internal policies menu that you can get to by clicking any resources in the top bar

- Add a main menu that you can get to by clicking the world clock

- Add world saving

- make the screen movable by clicking and dragging

- Create Geostationary space zones that you can put Solar Satellites into, make it so only a limited number of Solar Satellites
- can exist in each zone and only certain countries have building rights. Maybe 6 or 8 zones per world

- make it so that the second and up aircraft technologies give far superior aircraft but also open aircraft up to being more vulnerable
- to cyber attacks

- add running functions for all worlds in calculateCountryCapital in economic-functions. Right now only world 2 is being calculated




- POTENTIAL BUG: Test later to see if regular army and rebel armies display morale correctly when a rebel army is fighting offensively

- Orbital Mass Driver should give the ability to launch orbital units directly into High Orbit? This means that if Kessler Syndrome
- is too strong in low orbit that orbital sphere can be entirely skipped thus allowing some nations to still launch orbital units

- maybe experiment with disabling object caching and see how that goes (main2.js)

- maybe change it so that when buildings are destroyed, the building process they were attached to is replaced with 'null' so memory doesn't get too full

- WebSockets will be needed to connect the browser to the server and facilitate multiplayer gameplay
- WebWorkers will be needed to create a PWA and allow offline mode for the game, in addition to utilizing multiple cores
- Pointer Lock API can be used to get the coordinates of a mouse at any given moment






Things that your alert window should alert you to:
- A province being occupied by the enemy
- A Depression beginning
- A famine beginning
- War being declared on you / by an ally
- A new technology being discovered
- 



===== Trade Mechanics =============================================================================================
- Every country can send resources out every 3 months

- Only major Trade Powers can suck resources in and give money to the countries that sold them those resources
- this means that instead of multiplying 200 X 200 when looking for trade partners on a planet, you will only have
- to multiply 200 X 10 so it is easier on the computer, large countries can fight over becoming a trade Power
- and this can become a source of tension between large nations

- When a small country sends resources out, it choose a random country in one of the 10 Trade Powers to send the resources
- to (unless it is some sort of vassal). If the country is a land neighbor then no ship is sent and the trade is instant.
- When the ship reaches a port belonging to the trade power, the small
- nation receives money directly from the corporation of that nation. Corporations in turn
- can liquidate resources when they have too much of them for 10% more than they bought them for, so although the corporation
- might lose money in the short term, they gain money in the long run.

- If a country does not have a corporation, the government pays for the resources and gets them instead of the corporation
- but they can only liquidate them for 2% higher than market value.
======================================================================================================================



==== Factions ========================================================================================================
- Factions will be intertwined with Government, some countries will have multiple competing factions, while others
- may have only one powerful faction due to government type, corruption, or events. Events
- will often fire regarding factions, when factions are small and competing many of these events will only effect
- the relative power of each faction in their struggle with one another, as one faction becomes more and more powerful
- the events for that faction will start to have more negative effects for the country while the smaller faction
- will simply try to gain more power. Having a single large faction should generally be a bad thing but the faction
- system should be mostly self balancing. Faction events should be one of the mainways countries lose corporation shares

- Corporations can pick a side and prop up factions within a country. Usually a corporation only exists at the mercy of its
- owner nation but this is a chance for the corporation to help or hurt its host nation, or other nations in which it operates.

- Factions will feature heavily in government mechanics, most mechanics within a government should be tied to a faction
- in one way or another. This is another way to punish nations that only have one faction.

========================================================================================================================



==== Types of Leaderboards ==============================================================================================

- These leaderboards are the ones that will exist on the website's database. They will be publicly viewable either
- right away or after a DLC (probably right away). These leaderboards should strongly suggest the various different
- types of game styles that this game should cater to. Different play styles should be encouraged and strengthened
- and in the game these play styles should all have a roughly equal chance of winning more or less.

- Strongest Land Military Power (more points from land units and non-island provinces)

- Strongest Naval Power (more points from naval units and island provinces and seasteads)

- Strongest Space Power (more points from space units and colonies)

- Strongest Economic Power (more points from Trade and Corporations)

- Strongest Diplomatic Power (more points from alliances and vassals and other subjects)

=========================================================================================================================




==== Possible Policies ==================================================================================================
// polices that incease the production of one resource at the expense of another resource are useful for playing tall because
// large sprawling empires will usually be more likely to have an even mix of resources

- Food Increase 1: +10% Food for (-20% oil)(25 Influence)
- Food Increase 2: +20% Food for (-33% oil)(30 Influence. Must have Food Increase 1 for at least 5 years)
- Food Increase 3: +40% Food for (-50% oil) (20 Influence. Only available to certain Authoritarian governments)

- Oil Increase 1: +10% Oil for (-20% food)(25 Influence)
- Oil Increase 2: +20% Oil for (-33% food)(30 Influence. Must have Food Increase 1 for at least 5 years)
- Oil Increase 3: +40% Oil for (-50% food) (20 Influence. Only available to certain Authoritarian governments)

- Minerals Increase 1: +10% Minerals for (-20% Metals)(25 Influence)
- Minerals Increase 2: +20% Minerals for (-33% Metals)(30 Influence. Must have Minerals Increase 1 for at least 5 years)
- Minerals Increase 3: +40% Minerals for (-50% Metals) (20 Influence. Only available to certain Authoritarian governments)

- Metals Increase 1: +10% Metals for (-20% Minerals)(25 Influence)
- Metals Increase 2: +20% Metals for (-33% Minerals)(30 Influence. Must have Metals Increase 1 for at least 5 years)
- Metals Increase 3: +40% Metals for (-50% Minerals) (20 Influence. Only available to certain Authoritarian governments)

- Processed Minerals Increase 1: +10% Processed Minerals for (-20% Processed Metals)(25 Influence)
- Processed Minerals Increase 2: +20% Processed Minerals for (-33% Processed Metals)(30 Influence. Must have Processed Minerals Increase 1 for at least 5 years)
- Processed Minerals Increase 3: +40% Processed Minerals for (-50% Processed Metals) (20 Influence. Only available to certain Authoritarian governments)

- Processed Metals Increase 1: +10% Processed Metals for (-20% Processed Minerals)(25 Influence)
- Processed Metals Increase 2: +20% Processed Metals for (-33% Processed Minerals)(30 Influence. Must have Processed Metals Increase 1 for at least 5 years)
- Processed Metals Increase 3: +40% Processed Metals for (-50% Processed Minerals) (20 Influence. Only available to certain Authoritarian governments)

- Precious Metals Increase 1: +10% Precious Metals for (-20% Nuclear Materials)(25 Influence)
- Precious Metals Increase 2: +20% Precious Metals for (-33% Nuclear Materials)(30 Influence. Must have Precious Metals Increase 1 for at least 5 years)
- Precious Metals Increase 3: +40% Precious Metals for (-50% Nuclear Materials) (20 Influence. Only available to certain Authoritarian governments)

- Nuclear Materials Increase 1: +10% Nuclear Materials for (-20% Precious Metals)(25 Influence)
- Nuclear Materials Increase 2: +20% Nuclear Materials for (-33% Precious Metals)(30 Influence. Must have Nuclear Materials Increase 1 for at least 5 years)
- Nuclear Materials Increase 3: +40% Nuclear Materials for (-50% Precious Metals) (20 Influence. Only available to certain Authoritarian governments)

- Reduce Unrest: -1 influence (-0.5 Capital per province) for every -1 unrest

==========================================================================================================================






======================================= DLC ===================================================================

===== MILITARY DLC ===============================================================================================

- <basegame> Introduce Unit Stealth mechanics </basegame>

- <basegame> Submarines only exist after this DLC </basegame>

- Ability to customize military units stats (base game will only use default stats)

- Ability to commit genocides

- Generals get attributes that effect the armies they lead

- Civil War mechanics

===================================================================================================================

==== DISEASE DLC =================================================================================================

- disease mechanics can be present in the game

- disease can spawn naturally or be created to be super deadly

- other natural disasters such as Hurricanes or Earthquakes or Tsunamis or Solar Flares can occur

==================================================================================================================

==== DIPLOMATIC DLC ========================================================================================

Conciliat being able to form a fully controlled vassal swarm will be locked behind this DLC as well as being able to
play as the United Nations and WIL when that comes out (probably another DLC)

<basegame> Coalitions can be formed for multiple countries to join wars together </basegame>

Sanctions can be placed on countries stopping them from buying from certain corporations and stopping trade flow into
but not out of them

Theocracy Mechanics of having prophecies and a messianic figure return to conquer the planet?

<basegame> More Faction and Ideology mechanics (at least a couple)</basegame>

=================================================================================================================

==== SPACE DLC ==================================================================================================

- <basegame> Ability to Harvest Exotic matter </basegame>

- <basegame> Ability to build Wormholes to other Solar Systems </basegame>

- Maybe large Beam weapons to use against land countries if you have enough Solar Stations?

- Sky Marines can be built if you already have both Marines and Space Infantry

- Ability to build Antimatter factories on Gas Giants

=================================================================================================================

==== CUSTOM NATION DLC ==========================================================================================

- <basegame> Global leaderboard for singleplayer and multiplayer games </basegame>

- Ability to Create a Custom Nation and choose its starting provinces and national ideas

- ability to use custom nations in multiplayer games

==================================================================================================================

=== CYBERWAREFARE DLC ============================================================================================

Viruses to create:
Hijack Satellite
- Take Control of specific type of satellite

Disable Satellite
- De-orbit specific type of satellite

Disable Aircraft
- Crash aircraft

Hack Infrastructure
- Shut down specific type of building (multiple at a time?)

Virus
- Damage defense network (most common, the penalties for this are already explained in the blueprint)

Hack Research Facility
- Steal Technology (enemy must have a research facility)

Hack Military Comms
- Gain huge battle dice boost against enemy in next battle and drop the Battle Dice rolls to 0 everytime

Hack Banks
- Steal Money

Support Dissidents
- +3 unrest to any enemy province which already has at least 2 unrest

Military Intel
- Possible merge this with another virus, but basically this just adds the id of the country infected
- to the attacker country's "hasMilitaryIntel" array

Probably Internet trade and digital assets fall inside this DLC

===============================================================================================================

==== ECONOMIC DLC ================================================================================================

- Give Corporations Widget to sell to countries providing them with buffs or bonuses?

- Give Corporations the ability to purchase Mercenaries and take control of territory

- give countries and coporations the ability to buy soveriegn nation's debt and use it as leverage over them

- Create Independent Seasteads that occur naturally or at game start

==================================================================================================================

=== EXTRA ========================================================================================================

- once people can save their own nation to my database, allow paying for extra save slots

- custom flags for custom nations as an extra paid feature (or attaching the flag of your custom country to
- your profile)

- Set up a Patreon for people to pay for continued development

- Have a Kickstarter Campaign and allow people to name a country and add national ideas if they pay enough ($60)

==================================================================================================================